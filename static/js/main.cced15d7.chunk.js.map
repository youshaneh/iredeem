{"version":3,"sources":["context/Contexts.js","pages/About.js","utils/utils.js","components/common/Footer.js","environment.js","redux/actions.js","redux/actionTypes.js","components/common/Header.js","components/common/SearchPanel.js","pages/Home.js","components/common/CenterSpinner.js","components/search/SearchCalendar.js","components/search/SearchOptions.js","components/common/AsyncButton.js","components/common/SearchResultItem.js","components/search/SearchResult.js","pages/Search.js","components/account/PersonalInfo.js","components/common/WithHeightValueDiv.js","components/account/MyFlight.js","pages/Account.js","components/ToastContainer.js","components/App.js","serviceWorker.js","redux/reducer.js","index.js","images/about_bg.jpg","images/logo.png"],"names":["RouteContext","React","createContext","routes","undefined","AboutContent","props","className","to","onClick","setTimeout","window","scrollTo","top","left","behavior","src","about_bg","alt","About","data-stellar-ratio","data-stellar-vertical-offset","data-background","weekdayLabels","getOffsetMonthString","monthString","offest","date","Date","setMonth","getMonth","getLocalDateString","substring","Intl","DateTimeFormat","year","month","day","formatToParts","value","getDistance","lat1","lon1","lat2","lon2","PI","Math","a","cos","asin","sqrt","onLinkSelect","getJwtPayload","token","base64","split","replace","payload","decodeURIComponent","atob","map","c","charCodeAt","toString","slice","join","JSON","parse","Footer","href","target","rel","environment","authBaseUrl","setToken","type","setUserInfo","pushNotification","connect","userInfo","useState","expanded","setExpanded","onSelect","Navbar","collapseOnSelect","expand","variant","logo","Toggle","aria-controls","Collapse","id","exact","activeClassName","style","cursor","Login","NavDropdown","title","name","show","Divider","showSignIn","setShowSignIn","showSignUp","setShowSignUp","LoginModal","handleClose","handleSignUp","SignUpModal","setShow","onSuccess","header","body","signingIn","setSigningIn","errorMessage","setErrorMessage","email","setEmail","password","setPassword","e","preventDefault","fetch","method","headers","stringify","username","loginResponse","ok","Error","statusText","status","json","loginResponseJson","userId","getUserResponse","getUserContent","message","firstInputRef","createRef","Modal","onShow","current","focus","onHide","centered","Body","Title","ref","onChange","onKeyDown","handleEnter","ModalButton","Spinner","animation","size","screen","width","height","open","cssClass","xmlns","viewBox","fill","d","signingUp","setSigningUp","setname","passwordConfirm","setPasswordConfirm","signUp","autocomplete","children","key","form","index","indexOf","elements","AutoCompleteInput","forwardRef","focused","setFocused","allOptions","filter","option","toUpperCase","validOptions","invalidOptions","flatMap","includes","warn","placeholder","onFocus","select","onBlur","length","updateFunction","blur","onMouseDown","airports","city","invalidMsg","SearchPannelFrame","SearchPanel","departures","Set","arrivals","useContext","forEach","route","add","Array","from","departure","setDeparture","arrival","setArrival","departureOptions","getCorrespondingOptions","arrivalOptions","isDepartureValid","isArrivalValid","cabin","setCabin","showWarning","setShowWarning","history","useHistory","search","push","useEffect","autoRefresh","timestamp","setTimestamp","refs","useRef","selectedValue","selectedIndex","optionIndex","hasOption","onKeyUp","i","document","activeElement","clearArrival","clearDeparture","Banner","Home","CenterSpinner","CalendarMonth","dates","firstDay","firstDayNextMonth","getFullYear","getDay","getTime","setDate","getDate","toLocaleString","label","availabilities","calendarDate","available","CalendarDate","past","nonstopOnly","minTop","querySelector","offsetTop","offsetHeight","pageYOffset","availableOnly","firstMonth","setFirstMonth","secondMonth","changeMonth","offset","setAvailabilities","update","baseUrl","then","response","responseJson","catch","err","console","error","TransitionGroup","CSSTransition","timeout","classNames","setNonstopOnly","setAvailableOnly","checked","htmlFor","AsyncButton","Promise","resolve","onFinish","processing","setProcessing","finally","SearchResultItem","itinerary","flight1","flight2","isAvailable","button","lastFlight","timeDiffInMin","getTimezone","departureAirport","tz","utcOffset","arrivalAirport","TravelTimeInMin","arrivalTime","departureTime","FlightNumber","flight","Terminal","time","airport","parseInt","airport1","airport2","airport3","distance","lat","lon","interval","isCxKaOnly","airline","mileageChart","mileageRequirement","intervals","getMileageRequirement","process","onError","fallback","flightNumber","match","content","itineraries","setItineraries","selectedDay","nextDay","toISOString","sort","b","itineraryId","isNaN","in","Search","params","useParams","passwordSection","saving","setSaving","setName","platform","setPlatform","loading","setLoading","fillInBlanks","authType","autoComplete","textAlign","WithHeightValueDiv","containerClass","container","contentHeight","setContentHeight","firstElementChild","getComputedStyle","trackings","setTrackings","tracking","toLocaleDateString","code","getCabinNameFromCode","delay","Account","path","useRouteMatch","flex","toasts","clearNotification","toast","Toast","onClose","autohide","Header","setRoutes","localStorage","addEventListener","event","origin","location","data","headerArea","scrollY","scrollHeight","classList","remove","basename","Provider","Boolean","hostname","initialState","store","createStore","state","action","newToastId","newToasts","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","module","exports"],"mappings":"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","file":"static/js/main.cced15d7.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nexport let RouteContext = React.createContext({\r\n  routes: undefined\r\n});","import React, { Fragment } from 'react';\r\nimport { Link } from \"react-router-dom\";\r\nimport about_bg from '../images/about_bg.jpg';\r\nimport './About.scss';\r\n\r\nfunction About() {\r\n    return (\r\n        <Fragment>\r\n            <section className=\"breadcrumb_area\">\r\n                <div className=\"overlay bg-parallax\" data-stellar-ratio=\"0.8\" data-stellar-vertical-offset=\"0\" data-background=\"\"></div>\r\n                <div className=\"container\">\r\n                    <div className=\"page-cover text-center\">\r\n                        <h2 className=\"page-cover-tittle f_48\">About Us</h2>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <AboutContent />\r\n        </Fragment>\r\n    )\r\n}\r\n\r\nexport function AboutContent(props) {\r\n    return (\r\n        <section className=\"about_history_area section_gap\">\r\n            <div className=\"container\">\r\n                <div className=\"row\">\r\n                    <div className=\"col-md-6 align-items-center\">\r\n                        <div className=\"about_content \">\r\n                            <h2 className=\"title\">About<br />Our Mission &amp; Vision</h2>\r\n                            <p>\r\n                                This website is designed by a fan of Cathay Pacific who has deposited tens of\r\n                                thousands of mileage into his Asia Miles Account only to find it difficult to\r\n                                find award seats to redeem.\r\n                                Although the official website is good for searching tickets on one specific day,\r\n                                chances are that you have to check dozens of days to find an award seat,\r\n                                which can be tedious and time consuming.<br />\r\n                                iRedeem tries to provide an intuitive way to find all award seats you might\r\n                                be interested in. We strive to track as many routes as possible\r\n                                and keep the data up to date in the hopes that everyone can redeem their mileage\r\n                                for award tickets and enjoy their trips.\r\n\r\n                            </p>\r\n                            <Link to=\"/search\" className=\"theme_btn stretch\" onClick={() => {\r\n                                setTimeout(() => {\r\n                                    window.scrollTo({\r\n                                        top: 0,\r\n                                        left: 0,\r\n                                        behavior: 'smooth'\r\n                                    });\r\n                                }, 0)\r\n                            }}>Search</Link>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"col-md-6 center-vertical\">\r\n                        <img className=\"img-fluid\" src={about_bg} alt=\"img\" />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default About;\r\n","import mileageRequirement from '../mileageRequirement.json'\r\nimport airports from '../airports.json';\r\n\r\nexport const weekdayLabels = ['S', 'M', 'T', 'W', 'T', 'F', 'S'];\r\n\r\nexport function getOffsetMonthString(monthString, offest) {\r\n  let date = new Date(monthString);\r\n  date.setMonth(date.getMonth() + offest);\r\n  return getLocalDateString(date).substring(0, 7);\r\n}\r\n\r\nexport function getLocalDateString(date) {\r\n  const dateTimeFormat = new Intl.DateTimeFormat('en', { year: 'numeric', month: '2-digit', day: '2-digit' })\r\n  const [{ value: month }, , { value: day }, , { value: year }] = dateTimeFormat.formatToParts(date)\r\n  return `${year}-${month}-${day}`;\r\n}\r\n\r\nexport function getMileageRequirement(flight1, flight2, cabin) {\r\n  let airport1 = airports[flight1.departureAirport];\r\n  let airport2 = airports[flight1.arrivalAirport];\r\n  let airport3 = flight2 && airports[flight2.arrivalAirport];\r\n  let distance = getDistance(airport1.lat, airport1.lon, airport2.lat, airport2.lon);\r\n  if (airport3) distance += getDistance(airport2.lat, airport2.lon, airport3.lat, airport3.lon);\r\n  let isCxKaOnly = (flight1.airline === 'CX' || flight1.airline === 'KA') && (!flight2 || flight2.airline === 'CX' || flight2.airline === 'KA');\r\n  let mileageChart = mileageRequirement[isCxKaOnly ? 'cx' : 'oneWorld'];\r\n  let interval;\r\n  for (let i of mileageChart.intervals) {\r\n    if (i.from <= distance && distance <= i.to) {\r\n      interval = i.interval;\r\n      break;\r\n    }\r\n  }\r\n  if (!interval) throw new Error(`Invalid itinerary. ${flight1.airline} ${flight2?.airline} ${distance} miles`);\r\n  if (interval === 'long1/long2') {\r\n    let isFromOrToAmerica = airport1.tz.split('/')[0] === 'America' ||\r\n      (airport3 ? airport3.tz.split('/')[0] === 'America' : airport2.tz.split('/')[0] === 'America');\r\n    interval = isFromOrToAmerica ? 'long2' : 'long1';\r\n  }\r\n  return mileageChart[interval][cabin];\r\n}\r\n\r\nfunction getDistance(lat1, lon1, lat2, lon2) {\r\n  var PI = Math.PI / 180\r\n  var a = 0.5 - Math.cos((lat2 - lat1) * PI) / 2 +\r\n    Math.cos(lat1 * PI) * Math.cos(lat2 * PI) * (1 - Math.cos((lon2 - lon1) * PI)) / 2;\r\n  return 2 * 3958.8 * Math.asin(Math.sqrt(a));\r\n}\r\n\r\nexport function getCabinNameFromCode(code){\r\n  switch(code){\r\n    case 'F': return 'First';\r\n    case 'B': return 'Business';\r\n    case 'N': return 'Premium Economy';\r\n    case 'R': return 'Economy';\r\n    default: return code;\r\n  }\r\n}\r\n\r\nexport function onLinkSelect() {\r\n  setTimeout(() => {\r\n    window.scrollTo({\r\n      top: 0,\r\n      left: 0,\r\n      behavior: 'smooth'\r\n    });\r\n  }, 0)\r\n}\r\n\r\nexport function getJwtPayload(token) {\r\n  var base64Url = token.split('.')[1];\r\n  var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\r\n  window.base64 = base64;\r\n  var payload = decodeURIComponent(atob(base64).split('').map(function (c) {\r\n    return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\r\n  }).join(''));\r\n  return JSON.parse(payload);\r\n};","import React from 'react';\r\nimport { Link } from \"react-router-dom\";\r\nimport { onLinkSelect } from '../../utils/utils'\r\nimport './Footer.scss';\r\n\r\nfunction Footer() {\r\n    return (\r\n        <footer className=\"footer-area section_gap\">\r\n            <div className=\"container\">\r\n                <div className=\"row\">\r\n                    <div className=\"col-lg-12  col-md-12 col-sm-12\">\r\n                        <div className=\"single-footer-widget\">\r\n                            <h6 className=\"footer_title\">About the data</h6>\r\n                            <p>\r\n                                We try our best to keep the data up to date.\r\n                                However, the award ticket status is subject to change.\r\n                                In case of any inconsistency, the information shown on <a href=\"https://www.asiamiles.com\" target=\"_blank\" rel=\"noopener noreferrer\" >asiamiles.com</a> shall prevail.\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"border_line\"></div>\r\n                <div className=\"row footer-bottom d-flex justify-content-between align-items-center\">\r\n                    <p className=\"col-12 footer-text\">\r\n                        Copyright &copy; 2020 <Link to=\"/\" onClick={onLinkSelect}>iRedeem</Link> | designed by <a href=\"https://colorlib.com\" target=\"_blank\" rel=\"noopener noreferrer\">Colorlib</a>\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        </footer>\r\n    )\r\n}\r\n\r\nexport default Footer;\r\n","export const environment = {\r\n  // baseUrl: 'https://iredeem.tk/api',\r\n  // authBaseUrl: 'https://iredeem.tk/auth'\r\n  authBaseUrl: 'http://localhost:8081'\r\n};","import { AVAILABLE_ONLY, NONSTOP_ONLY, SET_TOKEN, SET_USER_INFO, PUSH_NOTIFICATION, CLEAR_NOTIFICATION } from \"./actionTypes\";\r\n\r\nexport const setAvailableOnly = (value) => {\r\n  return {\r\n    type: AVAILABLE_ONLY,\r\n    value\r\n  }\r\n}\r\n\r\nexport const setNonstopOnly = (value) => {\r\n  return {\r\n    type: NONSTOP_ONLY,\r\n    value\r\n  }\r\n}\r\n\r\nexport const setToken = (value) => {\r\n  return {\r\n    type: SET_TOKEN,\r\n    value\r\n  }\r\n}\r\n\r\nexport const setUserInfo = (value) => {\r\n  return {\r\n    type: SET_USER_INFO,\r\n    value\r\n  }\r\n}\r\n\r\nexport const pushNotification = (value) => {\r\n  return {\r\n    type: PUSH_NOTIFICATION,\r\n    value\r\n  }\r\n}\r\n\r\nexport const clearNotification = (value) => {\r\n  return {\r\n    type: CLEAR_NOTIFICATION,\r\n    value\r\n  }\r\n}\r\n","export const AVAILABLE_ONLY = \"AVAILABLE_ONLY\";\r\nexport const NONSTOP_ONLY = \"NONSTOP_ONLY\";\r\nexport const SET_TOKEN = \"SET_TOKEN\";\r\nexport const SET_USER_INFO = \"SET_USER_INFO\";\r\nexport const PUSH_NOTIFICATION = \"PUSH_NOTIFICATION\";\r\nexport const CLEAR_NOTIFICATION = \"CLEAR_NOTIFICATION\";","import React, { useState } from 'react';\r\nimport { Navbar, NavDropdown } from 'react-bootstrap';\r\nimport { Link, NavLink } from \"react-router-dom\";\r\nimport logo from '../../images/logo.png';\r\nimport { onLinkSelect } from '../../utils/utils'\r\nimport { Modal, Spinner } from 'react-bootstrap';\r\nimport './Header.scss';\r\nimport { environment } from '../../environment.js'\r\nimport { BsFillExclamationTriangleFill } from \"react-icons/bs\";\r\nimport { connect } from 'react-redux'\r\nimport { setToken, setUserInfo, pushNotification } from '../../redux/actions'\r\nimport { getJwtPayload } from \"../../utils/utils.js\";\r\n\r\nfunction Header({ userInfo, setToken, setUserInfo, pushNotification }) {\r\n  const [expanded, setExpanded] = useState(false);\r\n  let onSelect = () => {\r\n    onLinkSelect();\r\n    setExpanded(false)\r\n  }\r\n\r\n  return (\r\n    <header className=\"header_area\">\r\n      <div className=\"container\">\r\n        <Navbar collapseOnSelect expand=\"lg\" variant=\"light\" expanded={expanded}>\r\n          <Link to=\"/\" onClick={onSelect}>\r\n            <img className=\"logo\" src={logo} alt=\"logo\" />\r\n          </Link>\r\n          <Navbar.Toggle aria-controls=\"responsive-navbar-nav\" onClick={() => setExpanded(!expanded)}>\r\n            <span className=\"icon-bar\"></span>\r\n            <span className=\"icon-bar\"></span>\r\n            <span className=\"icon-bar\"></span>\r\n          </Navbar.Toggle>\r\n          <Navbar.Collapse id=\"responsive-navbar-nav\">\r\n            <ul className=\"nav navbar-nav menu_nav ml-auto\">\r\n              <li className=\"nav-item\">\r\n                <NavLink exact to=\"/\" activeClassName=\"active\" className=\"nav-link\" onClick={onSelect}>Home</NavLink>\r\n              </li>\r\n              <li className=\"nav-item\">\r\n                <NavLink to=\"/search\" activeClassName=\"active\" className=\"nav-link\" onClick={onSelect}>Search</NavLink>\r\n              </li>\r\n              <li className=\"nav-item\">\r\n                <NavLink to=\"/about\" activeClassName=\"active\" className=\"nav-link\" onClick={onSelect}>About</NavLink>\r\n              </li>\r\n              <li className=\"nav-item\">\r\n                {(userInfo == null) ?\r\n                  <span className=\"nav-link\" style={{ cursor: 'pointer' }}>\r\n                    <Login setToken={setToken} setUserInfo={setUserInfo} pushNotification={pushNotification} />\r\n                  </span> :\r\n                  <NavDropdown title={userInfo.name} show={true}>\r\n                    <NavLink to=\"/account/personal-info\" activeClassName=\"active-item\" className=\"nav-link sub-item dropdown-item\" onClick={onSelect}>Personal info</NavLink>\r\n                    <NavLink to=\"/account/my-flights\" activeClassName=\"active-item\" className=\"nav-link sub-item dropdown-item\" onClick={onSelect}>My flighs</NavLink>\r\n                    <NavDropdown.Divider />\r\n                    <span className=\"nav-link sub-item dropdown-item log-out\" onClick={() => {\r\n                      setToken(null);\r\n                      setUserInfo(null);\r\n                    }}>Log out</span>\r\n                  </NavDropdown>\r\n                }\r\n              </li>\r\n            </ul>\r\n          </Navbar.Collapse>\r\n        </Navbar>\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\nconst mapStateToProps = ({ userInfo }) => ({ userInfo });\r\nexport default connect(mapStateToProps, { setToken, setUserInfo, pushNotification })(Header);\r\n\r\nfunction Login({ setToken, setUserInfo, pushNotification }) {\r\n  const [showSignIn, setShowSignIn] = useState(false);\r\n  const [showSignUp, setShowSignUp] = useState(false);\r\n  return (\r\n    <>\r\n      <div onClick={() => { setShowSignIn(!showSignIn) }}>Sign in</div>\r\n      <LoginModal show={showSignIn} handleClose={() => setShowSignIn(false)}\r\n        setToken={setToken} setUserInfo={setUserInfo} handleSignUp={() => setShowSignUp(true)} />\r\n      <SignUpModal show={showSignUp} handleClose={() => setShowSignUp(false)} setShow={setShowSignUp}\r\n        onSuccess={() => {\r\n          pushNotification({ header: 'Sign Up', body: 'Sign up successfully. Please sign in with your email and password.' })\r\n        }} />\r\n    </>);\r\n};\r\n\r\nfunction LoginModal({ show, handleClose, setToken, setUserInfo, handleSignUp }) {\r\n  const [signingIn, setSigningIn] = useState(false);\r\n\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  async function signIn(e) {\r\n    e.preventDefault();\r\n    if (!signingIn) {\r\n      try {\r\n        setSigningIn(true);\r\n        const loginResponse = await fetch(`${environment.authBaseUrl}/auth`, {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({ username: email, password })\r\n        })\r\n        if (!loginResponse.ok) throw new Error(loginResponse.statusText || loginResponse.status)\r\n        const loginResponseJson = await loginResponse.json();\r\n        const token = loginResponseJson.token;\r\n        setToken(token);\r\n        const payload = getJwtPayload(token);\r\n        const getUserResponse = await fetch(`${environment.authBaseUrl}/users/${payload.userId}`, {\r\n          method: 'GET',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': `Bearer ${token}`\r\n          }\r\n        });\r\n        if (!getUserResponse.ok) throw new Error(getUserResponse.statusText || loginResponse.status)\r\n        const getUserContent = await getUserResponse.json();\r\n        setUserInfo(getUserContent)\r\n      }\r\n      catch (e) {\r\n        setErrorMessage(e.message);\r\n        setSigningIn(false);\r\n      }\r\n    }\r\n  }\r\n\r\n  const signInWithGoogle = e => {\r\n    e.preventDefault();\r\n    const height = 600;\r\n    const width = 600;\r\n    var left = (window.screen.width / 2) - (width / 2);\r\n    var top = (window.screen.height / 2) - (height / 2);\r\n    window.open(\"https://accounts.google.com/o/oauth2/auth/oauthchooseaccount?scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile%20https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email&access_type=offline&include_granted_scopes=true&response_type=code&state=test_state&redirect_uri=https%3A%2F%2Firedeem.tk%2Fauth%2Fauth%2Fgoogle&client_id=798521678690-6kppnermd79tiaau4t26i580vrelr4n6.apps.googleusercontent.com&flowName=GeneralOAuthFlow\",\r\n      \"googleOAuth\", `height=${height}, width=${width}, top=${top}, left=${left}`);\r\n  }\r\n\r\n  let firstInputRef = React.createRef();\r\n\r\n  return (\r\n    <Modal show={show} onShow={() => { firstInputRef.current.focus(); }} onHide={() => {\r\n      handleClose();\r\n      setEmail('');\r\n      setPassword('');\r\n      setErrorMessage('');\r\n    }} centered>\r\n      <Modal.Body>\r\n        <Modal.Title>Sign in</Modal.Title>\r\n        <div className={`error-msg ${(errorMessage === \"\") ? \"hide\" : \"\"}`}><BsFillExclamationTriangleFill /> {errorMessage}</div>\r\n        <form>\r\n          <div>Email</div>\r\n          <input className=\"wide form-control nice-select sign-in-input\" type=\"email\" ref={firstInputRef}\r\n            value={email} onChange={e => setEmail(e.target.value)} onKeyDown={handleEnter}></input>\r\n          <div>Password</div>\r\n          <input className=\"wide form-control nice-select sign-in-input\" type=\"password\"\r\n            value={password} onChange={e => setPassword(e.target.value)} onKeyDown={handleEnter}></input>\r\n          <div className=\"sign-up\"><a onClick={handleSignUp} href=\"#\">Sign up</a></div>\r\n          <ModalButton onClick={signIn}>\r\n            {signingIn ? <Spinner animation=\"border\" variant=\"primary\" size=\"sm\" /> : \"Sign in\"}\r\n          </ModalButton>\r\n        </form>\r\n        <ModalButton onClick={signInWithGoogle} cssClass=\"google-btn\">\r\n          Sign in with\r\n          <svg alt=\"Google\" className=\"logo-svg \" xmlns=\"http://www.w3.org/2000/svg\" width=\"80\" height=\"20\" viewBox=\"0 0 86 28\">\r\n            <path fill=\"#4285F4\" d=\"M10.4,21C4.7,21,0,16.2,0,10.5S4.7,0,10.4,0c3.1,0,5.3,1.3,7,2.9l-1.9,2c-1.2-1.2-2.8-2-5-2\r\n            c-4.1,0-7.3,3.4-7.3,7.6s3.2,7.6,7.3,7.6c2.7,0,4.2-1.1,5.1-2.1c0.8-0.8,1.3-2,1.5-3.8h-6.6V9.3h9.3c0.1,0.5,0.2,1.1,0.2,1.8\r\n            c0,2.2-0.5,5-2.4,6.9C15.7,20,13.4,21,10.4,21z\"></path>\r\n            <path fill=\"#EA4335\" d=\"M34.2,14.1c0,3.9-2.9,6.7-6.6,6.7s-6.6-2.8-6.6-6.7s2.9-6.7,6.6-6.7S34.2,10.2,34.2,14.1z M31.4,14.1\r\n            c0-2.5-1.7-4.1-3.7-4.1c-1.9,0-3.7,1.6-3.7,4.1c0,2.4,1.7,4.1,3.7,4.1C29.6,18.2,31.4,16.5,31.4,14.1z\"></path>\r\n            <path fill=\"#FBBC03\" d=\"M48.4,14.1c0,3.9-2.9,6.7-6.6,6.7s-6.6-2.8-6.6-6.7s2.9-6.7,6.6-6.7S48.4,10.2,48.4,14.1z M45.5,14.1\r\n            c0-2.5-1.7-4.1-3.7-4.1c-1.9,0-3.7,1.6-3.7,4.1c0,2.4,1.7,4.1,3.7,4.1C43.8,18.2,45.5,16.5,45.5,14.1z\"></path>\r\n            <path fill=\"#4285F4\" d=\"M61.7,7.8V20c0,5-2.7,7-6.1,7c-3.2,0-5-2.2-5.8-4l2.5-1.1c0.4,1.1,1.5,2.4,3.3,2.4c2.1,0,3.4-1.4,3.4-3.9v-1\r\n            h-0.1c-0.6,0.8-1.8,1.6-3.4,1.6c-3.3,0-6.2-2.9-6.2-6.8s2.9-6.7,6.2-6.7c1.6,0,2.7,0.7,3.4,1.6h0.1V7.8H61.7z M59.2,14.1\r\n            c0-2.4-1.5-4.1-3.5-4.1c-1.9,0-3.5,1.7-3.5,4.1s1.5,4.1,3.5,4.1C57.7,18.2,59.2,16.5,59.2,14.1z\"></path>\r\n            <path fill=\"#34A853\" d=\"M66.4,1.1v19.8h-2.8V1.1H66.4z\"></path>\r\n            <path fill=\"#EA4335\" d=\"M77.7,16.3l2.2,1.6c-0.7,1.1-2.5,3-5.5,3c-3.7,0-6.5-2.9-6.5-6.7c0-4,2.8-6.7,6.2-6.7c3.4,0,5,2.8,5.6,4.3\r\n            l0.3,0.7l-8.8,3.7c0.7,1.4,1.7,2,3.2,2S76.9,17.5,77.7,16.3z M70.8,14l5.8-2.5c-0.4-0.8-1.3-1.5-2.4-1.5C72.7,10,70.7,11.3,70.8,14\r\n            z\"></path>\r\n          </svg>\r\n        </ModalButton>\r\n      </Modal.Body>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nfunction SignUpModal({ show, setShow, handleClose, onSuccess }) {\r\n  const [signingUp, setSigningUp] = useState(false);\r\n\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n\r\n  const [name, setname] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [passwordConfirm, setPasswordConfirm] = useState(\"\");\r\n\r\n  const signUp = async (e) => {\r\n    e.preventDefault();\r\n    if (!signingUp) {\r\n      if (password !== passwordConfirm) {\r\n        setErrorMessage(\"Passwords don't match.\");\r\n        return;\r\n      }\r\n      try {\r\n        setSigningUp(true);\r\n        const loginResponse = await fetch(`${environment.authBaseUrl}/users`, {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({ name, email, password })\r\n        })\r\n        if (!loginResponse.ok) throw new Error(loginResponse.statusText || loginResponse.status)\r\n        const loginResponseJson = await loginResponse.json();\r\n        const token = loginResponseJson.token;\r\n        setToken(token);\r\n        setShow(false);\r\n        onSuccess();\r\n      }\r\n      catch (e) {\r\n        setErrorMessage(e.message);\r\n      }\r\n      finally {\r\n        setSigningUp(false);\r\n      }\r\n    }\r\n  }\r\n\r\n  let firstInputRef = React.createRef();\r\n  return (\r\n    <Modal show={show} onShow={() => { firstInputRef.current.focus(); }} onHide={() => {\r\n      handleClose();\r\n      setname('');\r\n      setEmail('');\r\n      setPassword('');\r\n      setPasswordConfirm('');\r\n      setErrorMessage('');\r\n    }} centered>\r\n      <Modal.Body>\r\n        <Modal.Title>Sign up</Modal.Title>\r\n        <div className={`error-msg ${(errorMessage === \"\") ? \"hide\" : \"\"}`}><BsFillExclamationTriangleFill /> {errorMessage}</div>\r\n        <form>\r\n          <div>name</div>\r\n          <input className=\"wide form-control nice-select sign-in-input\" type=\"text\" ref={firstInputRef}\r\n            value={name} onChange={e => setname(e.target.value)} onKeyDown={handleEnter}></input>\r\n          <div>Email</div>\r\n          <input className=\"wide form-control nice-select sign-in-input\" type=\"email\"\r\n            value={email} onChange={e => setEmail(e.target.value)} onKeyDown={handleEnter}></input>\r\n          <div>Password</div>\r\n          <input className=\"wide form-control nice-select sign-in-input\" type=\"password\" autocomplete=\"new-password\"\r\n            value={password} onChange={e => setPassword(e.target.value)} onKeyDown={handleEnter}></input>\r\n          <div>Confirm</div>\r\n          <input className=\"wide form-control nice-select sign-in-input\" type=\"password\" autocomplete=\"new-password\"\r\n            value={passwordConfirm} onChange={e => setPasswordConfirm(e.target.value)} onKeyDown={handleEnter}></input>\r\n          <ModalButton onClick={signUp}>\r\n            {signingUp ? <Spinner animation=\"border\" variant=\"primary\" size=\"sm\" /> : \"Sign up\"}\r\n          </ModalButton>\r\n        </form>\r\n      </Modal.Body>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nfunction ModalButton({ cssClass, children, onClick }) {\r\n  return (\r\n    <button className={`theme_btn sign-in-btn stretch ${cssClass}`} onClick={onClick}>\r\n      {children}\r\n    </button>\r\n  );\r\n}\r\n\r\nfunction handleEnter(e) {\r\n  if (e.key !== 'Enter') return;\r\n  const form = e.target.form;\r\n  const index = [...form].indexOf(e.target);\r\n  form.elements[index + 1].focus();\r\n  e.preventDefault();\r\n}","import React, { useEffect, useState, useContext, useRef } from 'react';\r\nimport Spinner from 'react-bootstrap/Spinner';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport airports from '../../airports.json';\r\nimport './SearchPanel.scss';\r\nimport { RouteContext } from '../../context/Contexts.js'\r\n\r\nfunction SearchPanel(props) {\r\n  let departures = new Set();\r\n  let arrivals = new Set();\r\n  const { routes } = useContext(RouteContext);\r\n  if (routes) {\r\n    routes.forEach(route => {\r\n      departures.add(route[0]);\r\n      arrivals.add(route[1]);\r\n    });\r\n  }\r\n  let allOptions = [Array.from(departures), Array.from(arrivals)]\r\n\r\n  const [departure, setDeparture] = useState(props.departure || '');\r\n  const [arrival, setArrival] = useState(props.arrival || '');\r\n  let departureOptions = getCorrespondingOptions({ arrival });\r\n  let arrivalOptions = getCorrespondingOptions({ departure })\r\n  let isDepartureValid = departureOptions.includes(departure);\r\n  let isArrivalValid = arrivalOptions.includes(arrival);\r\n\r\n  const [cabin, setCabin] = useState(props.cabin || 'B');\r\n  const [showWarning, setShowWarning] = useState(false);\r\n  const history = useHistory();\r\n  function search() {\r\n    setShowWarning(true);\r\n    if (isDepartureValid && isArrivalValid) history.push(`/search/${departure}/${arrival}/${cabin}`);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (props.autoRefresh) search();\r\n    // eslint-disable-next-line\r\n  }, [departure, arrival, cabin]);\r\n\r\n  const [timestamp, setTimestamp] = useState({});\r\n  if (timestamp !== props.timestamp) {\r\n    setTimestamp(props.timestamp);\r\n    setDeparture(props.departure || '');\r\n    setArrival(props.arrival || '');\r\n    setCabin(props.cabin || 'B');\r\n  }\r\n\r\n  const refs = [useRef(null), useRef(null), useRef(null), useRef(null)];\r\n\r\n  function getCorrespondingOptions({ departure, arrival }) {\r\n    if (!(departure !== undefined ^ arrival !== undefined)) throw new Error('leave either departure or arrival undefined to get available options for the field')\r\n    let selectedValue = (departure !== undefined) ? departure : arrival;\r\n    let selectedIndex = (selectedValue === departure) ? 0 : 1;\r\n    let optionIndex = 1 - selectedIndex;\r\n    const hasOption = ({ departure, arrival }) => {\r\n      let selectedValue = departure ? departure : arrival;\r\n      let selectedIndex = departure ? 0 : 1;\r\n      return allOptions[selectedIndex].includes(selectedValue);\r\n    }\r\n    return hasOption({ departure, arrival }) ?\r\n      routes?.flatMap(route => (route[selectedIndex] === selectedValue) ? [route[optionIndex]] : [])\r\n      : allOptions[optionIndex];\r\n  }\r\n\r\n  function checkSetDeparture(departure, clearArrival) {\r\n    setDeparture(departure);\r\n    clearArrival && setArrival('')\r\n  }\r\n\r\n  function checkSetArrival(arrival, clearDeparture) {\r\n    setArrival(arrival);\r\n    clearDeparture && setDeparture('')\r\n  }\r\n\r\n  return (\r\n    <SearchPannelFrame onKeyUp={e => {\r\n      if (e.key !== 'Enter') return;\r\n      for (let i = 0; i < refs.length - 1; i++) {\r\n        if (document.activeElement === refs[i].current) {\r\n          refs[i + 1].current.focus();\r\n          break;\r\n        }\r\n      }\r\n    }}>\r\n      <AutoCompleteInput ref={refs[0]} value={departure} routes={routes} warn={showWarning && !isDepartureValid}\r\n        updateFunction={checkSetDeparture} validOptions={departureOptions} allOptions={allOptions[0]}\r\n        placeholder=\"Where from?\" invalidMsg=\" - Not applicable\" />\r\n      <AutoCompleteInput ref={refs[1]} value={arrival} routes={routes} warn={showWarning && !isArrivalValid}\r\n        updateFunction={checkSetArrival} validOptions={arrivalOptions} allOptions={allOptions[1]}\r\n        placeholder=\"Where to?\" invalidMsg=\" - Not applicable\" />\r\n      <div className=\"col-md item\">\r\n        <select className=\"wide nice-select\" value={cabin} id=\"cabin\"\r\n          ref={refs[2]}\r\n          onChange={e => {\r\n            setCabin(e.target.value);\r\n          }}>\r\n          <option value=\"F\">First</option>\r\n          <option value=\"B\">Business</option>\r\n          <option value=\"N\">Premium Economy</option>\r\n          <option value=\"R\">Economy</option>\r\n        </select>\r\n      </div>\r\n      {!props.autoRefresh &&\r\n        <div className=\"col-md-2 item\">\r\n          <div className=\"book_tabel_item\">\r\n            <a className=\"theme_btn stretch\" ref={refs[3]} href=\"/search\" onClick={(e) => {\r\n              e.preventDefault();\r\n              search();\r\n            }}>Search</a>\r\n          </div>\r\n        </div>\r\n      }\r\n    </SearchPannelFrame>\r\n  )\r\n}\r\n\r\nconst AutoCompleteInput = React.forwardRef((props, ref) => {\r\n  const [focused, setFocused] = useState(false);\r\n  const allOptions = props.allOptions ? props.allOptions.filter(option => option.indexOf(props.value.toUpperCase()) >= 0) : [];\r\n  const validOptions = props.validOptions ? props.validOptions.filter(option => option.indexOf(props.value.toUpperCase()) >= 0) : [];\r\n  const invalidOptions = allOptions.flatMap(option => validOptions.includes(option) ? [] : [option]);\r\n  return (\r\n    <div className=\"col-md item\">\r\n      {props.routes !== undefined || <Spinner className=\"spinner\" animation=\"border\" variant=\"primary\" size=\"sm\" />}\r\n      <input className={`wide form-control nice-select ${props.warn ? 'invalid' : ''}`}\r\n        value={props.value}\r\n        ref={ref}\r\n        placeholder={(props.routes !== undefined) ? props.placeholder : 'Loading...'}\r\n        onFocus={e => {\r\n          e.target.select();\r\n          setFocused(true);\r\n        }}\r\n        onBlur={() => {\r\n          if (validOptions.length === 1 && props.value.length > 0) props.updateFunction(validOptions[0]);\r\n          setFocused(false)\r\n        }}\r\n        onChange={e => {\r\n          props.updateFunction(e.target.value);\r\n          if (props.validOptions.includes(e.target.value)) e.target.blur();\r\n        }} />\r\n      <div className={`options ${focused ? '' : 'hide'}`}>\r\n        <div className=\"border\">\r\n          {validOptions.map(option =>\r\n            <div className=\"airport-option\" key={option}\r\n              onMouseDown={() => {\r\n                props.updateFunction(option);\r\n              }}>\r\n              <div className=\"airport\">{option}</div>\r\n              <div className=\"details\">{airports[option].city}</div>\r\n            </div>)}\r\n          {invalidOptions.map(option =>\r\n            <div className=\"airport-option invalid\" key={option}\r\n              onMouseDown={() => {\r\n                props.updateFunction(option, true);\r\n              }}>\r\n              <div className=\"airport\">{option + props.invalidMsg}</div>\r\n              <div className=\"details\">{airports[option].city}</div>\r\n            </div>)}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nfunction SearchPannelFrame(props) {\r\n  return (\r\n    <div className=\"hotel_booking_area position\">\r\n      <div className=\"container\">\r\n        <div className=\"hotel_booking_table\">\r\n          <div className=\"book_tabel_item\">\r\n            <div className=\"row\" {...props}>\r\n              {props.children}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div >\r\n  );\r\n}\r\n\r\nexport default SearchPanel;\r\n","import React, { Fragment } from 'react';\r\nimport { AboutContent } from './About';\r\nimport './Home.scss';\r\nimport SearchPanel from '../components/common/SearchPanel';\r\n\r\nfunction Home() {\r\n  return (\r\n    <Fragment>\r\n      <Banner />\r\n      <AboutContent />\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nfunction Banner() {\r\n  return (\r\n    <section className=\"banner_area\">\r\n      <div className=\"booking_table align-items-center\">\r\n        <div className=\"overlay bg-parallax\" data-stellar-ratio=\"0.9\" data-stellar-vertical-offset=\"0\" data-background=\"\"></div>\r\n        <div className=\"container\">\r\n          <div className=\"banner_content text-center\">\r\n            <h6>Redeem miles</h6>\r\n            <h2>Start Your Journey</h2>\r\n            <p>\r\n              Asia Miles is Asias leading travel rewards program. <br />\r\n              iRedeem helps you find award seats in a faster and simpler way.\r\n            </p>\r\n            <a href=\"https://www.asiamiles.com\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"theme_btn\">Learn More about Asia Miles</a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <SearchPanel />\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default Home;\r\n","import React from 'react';\r\nimport './CenterSpinner.scss';\r\nimport Spinner from 'react-bootstrap/Spinner';\r\n\r\nfunction CenterSpinner() {\r\n  return (\r\n    <span className=\"center-spinner\">\r\n      <Spinner animation=\"border\" variant=\"primary\" />\r\n    </span>\r\n  );\r\n}\r\n\r\nexport default CenterSpinner;","import React, { useEffect, useState } from 'react';\r\nimport { RiArrowLeftSLine, RiArrowRightSLine } from 'react-icons/ri';\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { connect } from 'react-redux'\r\nimport { CSSTransition, TransitionGroup } from 'react-transition-group';\r\nimport { getOffsetMonthString, getLocalDateString, weekdayLabels } from '../../utils/utils';\r\nimport { environment } from '../../environment.js'\r\nimport CenterSpinner from '../common/CenterSpinner.js';\r\nimport './SearchCalendar.scss';\r\n\r\nfunction SearchCalendar(props) {\r\n  const [firstMonth, setFirstMonth] = useState((props.date || getLocalDateString(new Date())).substring(0, 7));\r\n  let secondMonth = getOffsetMonthString(firstMonth, 1);\r\n  function changeMonth(offset) {\r\n    setFirstMonth(getOffsetMonthString(firstMonth, offset));\r\n  }\r\n\r\n  const [availabilities, setAvailabilities] = useState({});\r\n  let { departure, arrival } = props;\r\n  if (availabilities.departure !== departure ||\r\n    availabilities.arrival !== arrival) {\r\n    setAvailabilities({ departure, arrival });\r\n  }\r\n  useEffect(() => {\r\n    function update(month) {\r\n      if (availabilities[month]) return;\r\n      let firstDay = (new Date(month) < new Date()) ? new Date() : new Date(month);\r\n      let firstDayNextMonth = new Date(firstDay.getFullYear(), firstDay.getMonth() + 1, 1);\r\n      fetch(`${environment.baseUrl}/availability?departure=${departure}&arrival=${arrival}&since=${getLocalDateString(firstDay)}&till=${getLocalDateString(firstDayNextMonth)}&includeWaitingList=false`, { method: 'get' })\r\n        .then(function (response) {\r\n          if (!response.ok) throw new Error(response.statusText);\r\n          return response.json();\r\n        })\r\n        .then(function (responseJson) {\r\n          setAvailabilities(availabilities => ({ ...availabilities, [month]: responseJson }));\r\n        })\r\n        .catch(function (err) {\r\n          console.error(err);\r\n        })\r\n    }\r\n    update(firstMonth);\r\n    update(secondMonth);\r\n  }, [departure, arrival, firstMonth, secondMonth, availabilities]);\r\n\r\n  return (\r\n    <section id=\"searchCalendar\">\r\n      <div className=\"arrow-container\">\r\n        <div className=\"arrow-span left\" onClick={() => changeMonth(-1)}>\r\n          <RiArrowLeftSLine className=\"arrow\" />\r\n        </div>\r\n        <div className=\"container\">\r\n          <TransitionGroup className=\"months\">\r\n            <CSSTransition key={firstMonth} timeout={500} classNames=\"month\">\r\n              <div className=\"col-md left\">\r\n                <CalendarMonth month={firstMonth} availabilities={!(departure && arrival) ? [] : availabilities[firstMonth]} {...props} />\r\n              </div>\r\n            </CSSTransition>\r\n            <CSSTransition key={secondMonth} timeout={500} classNames=\"month\">\r\n              <div className=\"col-md right\">\r\n                <CalendarMonth month={secondMonth} availabilities={!(departure && arrival) ? [] : availabilities[secondMonth]} {...props} />\r\n              </div>\r\n            </CSSTransition>\r\n          </TransitionGroup>\r\n        </div>\r\n        <div className=\"arrow-span right\" onClick={() => changeMonth(1)}>\r\n          <RiArrowRightSLine className=\"arrow\" />\r\n        </div>\r\n      </div>\r\n    </section>\r\n  )\r\n}\r\n\r\nfunction CalendarMonth(props) {\r\n  let dates = [];\r\n  let firstDay = new Date(props.month);\r\n  let firstDayNextMonth = new Date(firstDay.getFullYear(), firstDay.getMonth() + 1, 1);\r\n  for (let i = 0; i < firstDay.getDay(); i++) dates.push(null);\r\n  for (let date = new Date(firstDay.getTime()); date.getMonth() === firstDay.getMonth(); date.setDate(date.getDate() + 1)) {\r\n    dates.push(new Date(date.getTime()));\r\n  }\r\n  for (let i = firstDayNextMonth.getDay() || 7; i < 7; i++) dates.push(null);\r\n  return (\r\n    <div className=\"calendar-month\">\r\n      <h4 className=\"calendar-month-header\">{firstDay.toLocaleString('default', { month: 'long' })}</h4>\r\n      {weekdayLabels.map((label, index) => <div key={index} className=\"weekday-label\">{label}</div>)}\r\n      {props.availabilities === undefined && <div className=\"loading\"><CenterSpinner /></div>}\r\n      {dates.map((calendarDate, index) => {\r\n        let available = calendarDate && props.availabilities && props.availabilities[getLocalDateString(calendarDate)]?.[props.cabin];\r\n        return <CalendarDate key={props.month + index} calendarDate={calendarDate} available={available} {...props} />\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction CalendarDate(props) {\r\n  const past = props.calendarDate && props.calendarDate < new Date(getLocalDateString(new Date()).substring(0, 10));\r\n  const available = props.available === 'E' || (props.available === 'Y' && !props.nonstopOnly);\r\n  return (\r\n    <div className={`calendar-day ${past ? 'past' : ''} ${props.calendarDate ? 'active ' : ''} ${available ? 'available ' : ''}`}>\r\n      {props.calendarDate && (\r\n        (props.departure && props.arrival && props.cabin) ?\r\n          past ?\r\n            <span>{props.calendarDate.getDate()}</span> :\r\n            <NavLink to={`/search/${props.departure}/${props.arrival}/${props.cabin}/${getLocalDateString(props.calendarDate)}`}\r\n              activeClassName=\"selected\"\r\n              onClick={() => {\r\n                if(past) return;\r\n                let minTop = document.querySelector('#searchCalendar').offsetTop - (document.querySelector('.header_area')?.offsetHeight);\r\n                if (window.pageYOffset < minTop) {\r\n                  window.scrollTo({\r\n                    top: minTop,\r\n                    left: 0,\r\n                    behavior: 'smooth'\r\n                  });\r\n                }\r\n              }}>\r\n              {props.calendarDate.getDate()}\r\n            </NavLink> :\r\n          <span onClick={() => {\r\n            window.scrollTo({\r\n              top: document.querySelector('.hotel_booking_area').offsetTop - (document.querySelector('.header_area')?.offsetHeight),\r\n              left: 0,\r\n              behavior: 'smooth'\r\n            });\r\n          }}>\r\n            {props.calendarDate.getDate()}\r\n          </span>)\r\n      }\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = ({ nonstopOnly, availableOnly }) => ({ nonstopOnly, availableOnly });\r\n\r\nexport default connect(mapStateToProps)(SearchCalendar);\r\n","import React from 'react';\r\nimport './SearchOptions.scss';\r\nimport { connect } from 'react-redux'\r\nimport { setNonstopOnly, setAvailableOnly } from '../../redux/actions'\r\n\r\nfunction SearchOptions(props) {\r\n  return (\r\n    <section className=\"narrow_gap\">\r\n      <div className=\"container\">\r\n        <div className=\"row\">\r\n          <div className=\"col-6 col-md-4 col-lg-3\">\r\n            <div className=\"option\" >\r\n              <span>Available Only</span>\r\n              <div className=\"primary-switch\">\r\n                <input type=\"checkbox\" id=\"available-only\"\r\n                  checked={props.availableOnly}\r\n                  onChange={(e) => props.setAvailableOnly(e.target.checked)} />\r\n                <label htmlFor=\"available-only\"></label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"col-6 col-md-4 col-lg-3\">\r\n            <div className=\"option\" >\r\n              <span>Nonstop Only</span>\r\n              <div className=\"primary-switch\">\r\n                <input type=\"checkbox\" id=\"non-stop-only\"\r\n                  checked={props.nonstopOnly}\r\n                  onChange={(e) => props.setNonstopOnly(e.target.checked)} />\r\n                <label htmlFor=\"non-stop-only\"></label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = ({ nonstopOnly, availableOnly }) => ({ nonstopOnly, availableOnly });\r\nexport default connect(mapStateToProps, { setNonstopOnly, setAvailableOnly })(SearchOptions);\r\n","import React, { useState } from 'react';\r\nimport { Spinner } from 'react-bootstrap';\r\n\r\nexport default function AsyncButton({ children, onClick = () => Promise.resolve(''), onFinish = () => { }}) {\r\n  let [processing, setProcessing] = useState(false);\r\n  function start() {\r\n    if (!processing) {\r\n      setProcessing(true);\r\n      onClick()\r\n        .then(() => {\r\n          onFinish();\r\n        })\r\n        .finally(() => {\r\n          setProcessing(false);\r\n        })\r\n    }\r\n  }\r\n\r\n  return (\r\n    <button className={`theme_btn track-btn stretch`} onClick={start}>\r\n      {processing ? <Spinner animation=\"border\" variant=\"primary\" size=\"sm\" /> : children}\r\n    </button>);\r\n}","import React, { useEffect, useState } from 'react';\r\nimport { getMileageRequirement } from '../../utils/utils.js'\r\nimport '../search/SearchResult.scss';\r\nimport CenterSpinner from '../common/CenterSpinner.js';\r\nimport { Collapse } from 'react-bootstrap';\r\nimport { environment } from '../../environment.js'\r\nimport { connect } from 'react-redux'\r\nimport { getTimezone } from 'countries-and-timezones';\r\nimport airports from '../../airports.json';\r\nimport AsyncButton from '../common/AsyncButton';\r\nimport { pushNotification } from '../../redux/actions'\r\n\r\nexport default function SearchResultItem({ itinerary: { flight1, flight2 }, isAvailable, cabin, button }) {\r\n  let lastFlight = flight2 || flight1;\r\n  let departureTimezoneOffest = getTimezone(airports[flight1.departureAirport].tz).utcOffset;\r\n  let arrivalTimezoneOffest = getTimezone(airports[lastFlight.arrivalAirport].tz).utcOffset;\r\n  let timeDiffInMin = departureTimezoneOffest - arrivalTimezoneOffest;\r\n  let TravelTimeInMin = (new Date(lastFlight.arrivalTime) - new Date(flight1.departureTime)) / (60 * 1000) + timeDiffInMin;\r\n  return (\r\n    <div className=\"result-item\">\r\n      <div className={`result-item-content ${isAvailable ? '' : 'not-available'}`}>\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n            <div className=\"col-md fade-when-not-available\">\r\n              <div className=\"flight-number-row\">\r\n                <FlightNumber flight={flight1} />\r\n                {flight2 && <><span className=\"arrow\"></span><FlightNumber flight={flight2} /></>}\r\n              </div>\r\n              <div className=\"flight-info-row\">\r\n                <Terminal time={flight1.departureTime} airport={flight1.departureAirport} />\r\n                <div className=\"course\">\r\n                  <div className=\"duration\">{`${parseInt(TravelTimeInMin / 60)}hr ${TravelTimeInMin % 60}min`}</div>\r\n                  <div className=\"legs\">\r\n                    <span className=\"leg\" />\r\n                    {flight2 &&\r\n                      <span className=\"stopover\">\r\n                        <div>\r\n                          <span className=\"dot\"></span>\r\n                        </div>\r\n                        <div className=\"airport\">\r\n                          {flight2.departureAirport}\r\n                        </div>\r\n                      </span>}\r\n                    {flight2 && <span className=\"leg\" />}\r\n                  </div>\r\n                </div>\r\n                <Terminal time={flight2?.arrivalTime || flight1?.arrivalTime} airport={flight2?.arrivalAirport || flight1?.arrivalAirport} />\r\n              </div>\r\n            </div>\r\n            <div className=\"col-md-3 col-xl-2 row m-0 p-0 center\">\r\n              <div className=\"mileage-requirement col-5 col-md-12 m-0 fade-when-not-available\">\r\n                <span className=\"mileage\">{getMileageRequirement(flight1, flight2, cabin)}</span>\r\n                <span className=\"unit\">miles</span>\r\n              </div>\r\n              <div className=\"col-7 col-md-12 m-0\">{button}</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction FlightNumber(props) {\r\n  return (\r\n    <div className=\"flight-number\">\r\n      <img className=\"airline-logo\" alt={props.flight.airline} src={`${process.env.PUBLIC_URL}/images/logo/${props.flight.airline}.png`}\r\n        onError={(e) => {\r\n          let fallback = `${process.env.PUBLIC_URL}/images/logo/oneworld.png`;\r\n          if (e.target.src != fallback) e.target.src = fallback;\r\n        }} />\r\n      <span>{props.flight.airline + props.flight.flightNumber}</span>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Terminal(props) {\r\n  return (\r\n    <span className=\"terminal-container\">\r\n      <div className=\"terminal\">\r\n        <div className=\"time\">\r\n          {props.time.match(/T(\\d{2}:\\d{2})/)[1]}\r\n        </div>\r\n        <div className=\"airport\">\r\n          {props.airport}\r\n        </div>\r\n      </div>\r\n    </span>\r\n  );\r\n}","import React, { useEffect, useState } from 'react';\r\nimport './SearchResult.scss';\r\nimport CenterSpinner from '../common/CenterSpinner.js';\r\nimport { Collapse } from 'react-bootstrap';\r\nimport { environment } from '../../environment.js'\r\nimport { connect } from 'react-redux'\r\nimport AsyncButton from '../common/AsyncButton';\r\nimport { pushNotification } from '../../redux/actions'\r\nimport SearchResultItem from '../common/SearchResultItem';\r\n\r\nfunction SearchResult(props) {\r\n  const [itineraries, setItineraries] = useState(props.date ? undefined : []);\r\n  useEffect(() => {\r\n    if (!(props.departure && props.arrival && props.date)) return;\r\n    let selectedDay = new Date(props.date);\r\n    let nextDay = new Date(selectedDay.getTime() + 24 * 60 * 60 * 1000);\r\n    setItineraries(undefined);\r\n    fetch(`${environment.baseUrl}/itineraries?departure=${props.departure}&arrival=${props.arrival}&since=${selectedDay.toISOString().split('T')[0]}&till=${nextDay.toISOString().split('T')[0]}`, { method: 'get' })\r\n      .then(function (response) {\r\n        if (!response.ok) throw new Error(response.statusText)\r\n        return response.json();\r\n      })\r\n      .then(function (responseJson) {\r\n        responseJson.sort((a, b) => new Date(a.flight1.departureTime).getTime() - new Date(b.flight1.departureTime).getTime());\r\n        setItineraries(responseJson);\r\n      })\r\n      .catch(function (err) {\r\n        console.error(err);\r\n      })\r\n  }, [props.departure, props.arrival, props.date]);\r\n  let content;\r\n  if (props.date) {\r\n    content = itineraries ?\r\n      itineraries.map(itinerary => {\r\n        let { flight1, flight2, itineraryId } = itinerary;\r\n        let isAvailable = !isNaN(flight1[`status${props.cabin}`]) && (!flight2 || !isNaN(flight2[`status${props.cabin}`]));\r\n        let userId = props.userId;\r\n        let cabin = props.cabin;\r\n        function addToTracking() {\r\n          return (async () => {\r\n            if(!props.token){\r\n              props.pushNotification({\r\n                header: 'Track',\r\n                body: `Log in to add the flight to your list.`\r\n              });\r\n              return;\r\n            }\r\n            try {\r\n              let response = await fetch(`${environment.baseUrl}/tracking`, {\r\n                method: 'POST',\r\n                headers: {\r\n                  'Content-Type': 'application/json',\r\n                  'Authorization': `Bearer ${props.token}`\r\n                },\r\n                body: JSON.stringify({ userId, itineraryId, cabin })\r\n              })\r\n              if (!response.ok) {\r\n                throw new Error((await response.json()).message)\r\n              }\r\n              props.pushNotification({\r\n                header: 'Track',\r\n                body: 'Add to tracking list successfully.'\r\n              })\r\n            }\r\n            catch (e) {\r\n              props.pushNotification({\r\n                header: 'Track',\r\n                body: `Fail to add to tracking list. ${e.message}`\r\n              })\r\n            }\r\n          })();\r\n        }\r\n\r\n        return (\r\n          <Collapse in={!(props.nonstopOnly && flight2) && !(props.availableOnly && !isAvailable)} key={itinerary.itineraryId} >\r\n            <div>\r\n              <SearchResultItem itinerary={itinerary} cabin={props.cabin} isAvailable={isAvailable}\r\n                button={<AsyncButton onClick={addToTracking}>Track</AsyncButton>} />\r\n            </div>\r\n          </Collapse>)\r\n      }) :\r\n      <div className=\"loading\"><CenterSpinner /></div>\r\n  }\r\n  return (\r\n    <section className=\"result_area\">\r\n      <div className=\"container\">\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            {content}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = ({ nonstopOnly, availableOnly, token, userId }) => ({ nonstopOnly, availableOnly, token, userId })\r\nexport default connect(mapStateToProps, { pushNotification })(SearchResult)","import React, { Fragment, useEffect } from 'react';\r\nimport { useParams } from \"react-router-dom\";\r\nimport SearchCalendar from '../components/search/SearchCalendar';\r\nimport SearchOptions from '../components/search/SearchOptions';\r\nimport SearchPanel from '../components/common/SearchPanel';\r\nimport SearchResult from \"../components/search/SearchResult\";\r\nimport './Search.scss';\r\n\r\nfunction Search() {\r\n  const params = useParams();\r\n  useEffect(() => {\r\n    if (params.departure && params.arrival && params.cabin && !params.date) {\r\n      let top = document.querySelector('#searchCalendar').offsetTop - (document.querySelector('.header_area')?.offsetHeight);\r\n      window.scrollTo({\r\n        top,\r\n        left: 0,\r\n        behavior: 'smooth'\r\n      });\r\n    }\r\n    // eslint-disable-next-line\r\n  }, []);\r\n  return (\r\n    <Fragment>\r\n      <section className=\"banner_area\">\r\n        <div className=\"breadcrumb_area blog_banner_two\">\r\n          <div className=\"overlay bg-parallax\" data-stellar-ratio=\"0.8\" data-stellar-vertical-offset=\"0\" data-background=\"\"></div>\r\n          <div className=\"container\">\r\n            <div className=\"page-cover text-center\">\r\n              <h2 className=\"page-cover-tittle f_48\">Search</h2>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <SearchPanel {...params} timestamp={new Date().getTime()} autoRefresh={true} />\r\n      </section>\r\n      <section className=\"narrow_gap\">\r\n        <SearchCalendar {...params} />\r\n        <SearchOptions />\r\n        <SearchResult {...params} />\r\n      </section>\r\n    </Fragment>\r\n  )\r\n}\r\n\r\nexport default Search;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Spinner } from 'react-bootstrap';\r\nimport { environment } from '../../environment.js'\r\nimport { BsFillExclamationTriangleFill } from \"react-icons/bs\";\r\nimport { connect } from 'react-redux'\r\nimport { setToken, setUserInfo, pushNotification } from '../../redux/actions'\r\nimport './account.scss';\r\n\r\nfunction PersonalInfo({ userId, token, setUserInfo, pushNotification }) {\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n  const [saving, setSaving] = useState(false);\r\n\r\n  const [name, setName] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [platform, setPlatform] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [passwordConfirm, setPasswordConfirm] = useState(\"\");\r\n\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  function fillInBlanks(userInfo) {\r\n    setName(userInfo.name);\r\n    setEmail(userInfo.email);\r\n    setPlatform(userInfo.authType.platform);\r\n    setPassword('');\r\n    setPasswordConfirm('');\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetch(`${environment.authBaseUrl}/users/${userId}`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${token}`\r\n      }\r\n    })\r\n      .then(function (response) {\r\n        if (!response.ok) throw new Error(response.statusText)\r\n        return response.json();\r\n      })\r\n      .then(function (responseJson) {\r\n        setLoading(false);\r\n        fillInBlanks(responseJson);\r\n      })\r\n      .catch(function (err) {\r\n        console.error(err);\r\n      });\r\n  }, [userId, token]);\r\n\r\n  const save = (e) => {\r\n    e.preventDefault();\r\n    if (!saving) {\r\n      if (password !== passwordConfirm) {\r\n        setErrorMessage(\"Passwords don't match.\");\r\n        return;\r\n      }\r\n\r\n      setSaving(true);\r\n      fetch(`${environment.authBaseUrl}/users/${userId}`, {\r\n        method: 'PATCH',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `bearer ${token}`\r\n        },\r\n        body: JSON.stringify({ name, email, password })\r\n      })\r\n        .then(function (response) {\r\n          if (!response.ok) throw new Error(response.statusText)\r\n          return response.json();\r\n        })\r\n        .then(function (responseJson) {\r\n          setErrorMessage('');\r\n          fillInBlanks(responseJson);\r\n          setUserInfo(responseJson);\r\n          pushNotification({ header: 'Personal Info', body: 'Update personal info successfully.' })\r\n        })\r\n        .catch(function (err) {\r\n          setErrorMessage(err.message);\r\n        })\r\n        .finally(function () {\r\n          setSaving(false);\r\n        });\r\n    }\r\n  }\r\n\r\n  let passwordSection;\r\n  if (platform === 'google') {\r\n    passwordSection = (<div className=\"oauth-placeholder\">\r\n      You are signed in with\r\n      <svg alt=\"Google\" className=\"logo-svg \" xmlns=\"http://www.w3.org/2000/svg\" width=\"80\" height=\"20\" viewBox=\"0 0 86 28\">\r\n        <path fill=\"#4285F4\" d=\"M10.4,21C4.7,21,0,16.2,0,10.5S4.7,0,10.4,0c3.1,0,5.3,1.3,7,2.9l-1.9,2c-1.2-1.2-2.8-2-5-2\r\n      c-4.1,0-7.3,3.4-7.3,7.6s3.2,7.6,7.3,7.6c2.7,0,4.2-1.1,5.1-2.1c0.8-0.8,1.3-2,1.5-3.8h-6.6V9.3h9.3c0.1,0.5,0.2,1.1,0.2,1.8\r\n      c0,2.2-0.5,5-2.4,6.9C15.7,20,13.4,21,10.4,21z\"></path>\r\n        <path fill=\"#EA4335\" d=\"M34.2,14.1c0,3.9-2.9,6.7-6.6,6.7s-6.6-2.8-6.6-6.7s2.9-6.7,6.6-6.7S34.2,10.2,34.2,14.1z M31.4,14.1\r\n      c0-2.5-1.7-4.1-3.7-4.1c-1.9,0-3.7,1.6-3.7,4.1c0,2.4,1.7,4.1,3.7,4.1C29.6,18.2,31.4,16.5,31.4,14.1z\"></path>\r\n        <path fill=\"#FBBC03\" d=\"M48.4,14.1c0,3.9-2.9,6.7-6.6,6.7s-6.6-2.8-6.6-6.7s2.9-6.7,6.6-6.7S48.4,10.2,48.4,14.1z M45.5,14.1\r\n      c0-2.5-1.7-4.1-3.7-4.1c-1.9,0-3.7,1.6-3.7,4.1c0,2.4,1.7,4.1,3.7,4.1C43.8,18.2,45.5,16.5,45.5,14.1z\"></path>\r\n        <path fill=\"#4285F4\" d=\"M61.7,7.8V20c0,5-2.7,7-6.1,7c-3.2,0-5-2.2-5.8-4l2.5-1.1c0.4,1.1,1.5,2.4,3.3,2.4c2.1,0,3.4-1.4,3.4-3.9v-1\r\n      h-0.1c-0.6,0.8-1.8,1.6-3.4,1.6c-3.3,0-6.2-2.9-6.2-6.8s2.9-6.7,6.2-6.7c1.6,0,2.7,0.7,3.4,1.6h0.1V7.8H61.7z M59.2,14.1\r\n      c0-2.4-1.5-4.1-3.5-4.1c-1.9,0-3.5,1.7-3.5,4.1s1.5,4.1,3.5,4.1C57.7,18.2,59.2,16.5,59.2,14.1z\"></path>\r\n        <path fill=\"#34A853\" d=\"M66.4,1.1v19.8h-2.8V1.1H66.4z\"></path>\r\n        <path fill=\"#EA4335\" d=\"M77.7,16.3l2.2,1.6c-0.7,1.1-2.5,3-5.5,3c-3.7,0-6.5-2.9-6.5-6.7c0-4,2.8-6.7,6.2-6.7c3.4,0,5,2.8,5.6,4.3\r\n      l0.3,0.7l-8.8,3.7c0.7,1.4,1.7,2,3.2,2S76.9,17.5,77.7,16.3z M70.8,14l5.8-2.5c-0.4-0.8-1.3-1.5-2.4-1.5C72.7,10,70.7,11.3,70.8,14\r\n      z\"></path>\r\n      </svg>\r\n    </div>);\r\n  }\r\n  else {\r\n    passwordSection = (<>\r\n      <div>Password</div>\r\n      <input className=\"wide form-control nice-select sign-in-input\" type=\"password\" autoComplete=\"new-password\"\r\n        value={password} onChange={e => setPassword(e.target.value)}></input>\r\n      <div>Confirm</div>\r\n      <input className=\"wide form-control nice-select sign-in-input\" type=\"password\" autoComplete=\"new-password\"\r\n        value={passwordConfirm} onChange={e => setPasswordConfirm(e.target.value)}></input>\r\n    </>);\r\n  }\r\n\r\n  return (\r\n    <div className=\"row\">\r\n      <div className=\"col-md-12 align-items-center\">\r\n        <div className=\"about_content \">\r\n          <h2 className=\"title\">Personal Info</h2>\r\n          {loading ? <div className=\"loading\"><Spinner animation=\"border\" variant=\"primary\" /></div> :\r\n            (<>\r\n              <div className={`error-msg ${(errorMessage === \"\") ? \"hide\" : \"\"}`}><BsFillExclamationTriangleFill /> {errorMessage}</div>\r\n              <form>\r\n                <div>Nickname</div>\r\n                <input className=\"wide form-control nice-select sign-in-input\" type=\"text\"\r\n                  value={name} onChange={e => setName(e.target.value)}></input>\r\n                <div>Email</div>\r\n                <input className=\"wide form-control nice-select sign-in-input\" type=\"email\"\r\n                  value={email} onChange={e => setEmail(e.target.value)}></input>\r\n                {passwordSection}\r\n                <div style={{ textAlign: \"right\" }}>\r\n                  <button className={'theme_btn sign-in-btn stretch'} style={{ width: \"30%\" }} onClick={save}>\r\n                    {saving ? <Spinner animation=\"border\" variant=\"primary\" size=\"sm\" /> : \"Save\"}\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            </>)\r\n          }\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\nconst mapStateToProps = ({ userId, token }) => ({ userId, token });\r\nexport default connect(mapStateToProps, { setToken, setUserInfo, pushNotification })(PersonalInfo);","import React, { useEffect, useState, useRef } from 'react';\r\n\r\nexport default function WithHeightValueDiv({ children, containerClass }) {\r\n  const container = useRef();\r\n  const [contentHeight, setContentHeight] = useState(0);\r\n  useEffect(() => {\r\n    let content = container.current?.firstElementChild;\r\n    let height = content ? getComputedStyle(content).height : 0;\r\n    setContentHeight(height);\r\n  }, [])\r\n  return (\r\n    <div ref={container} className={containerClass} style={{ ['--target-height']: contentHeight}}>\r\n      <div>{children}</div>\r\n    </div>\r\n  )\r\n}","import React, { useEffect, useState } from 'react';\r\nimport { Spinner } from 'react-bootstrap';\r\nimport { environment } from '../../environment.js'\r\nimport { connect } from 'react-redux'\r\nimport { setToken, setUserInfo, pushNotification } from '../../redux/actions'\r\nimport './account.scss';\r\nimport SearchResultItem from '../common/SearchResultItem';\r\nimport AsyncButton from '../common/AsyncButton';\r\nimport { CSSTransition, TransitionGroup } from 'react-transition-group';\r\nimport WithHeightValueDiv from '../common/WithHeightValueDiv.js'\r\nimport {getCabinNameFromCode} from '../../utils/utils.js'\r\n\r\nfunction MyFlight({ userId, token, setUserInfo, pushNotification }) {\r\n  const [trackings, setTrackings] = useState(undefined);\r\n  useEffect(() => {\r\n    fetch(`${environment.baseUrl}/tracking`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${token}`\r\n      }\r\n    })\r\n      .then(function (response) {\r\n        if (!response.ok) throw new Error(response.statusText)\r\n        return response.json();\r\n      })\r\n      .then(function (responseJson) {\r\n        setTrackings(responseJson);\r\n      })\r\n      .catch(function (err) {\r\n        console.error(err);\r\n      })\r\n  }, [userId, token]);\r\n\r\n  let content = trackings ?\r\n    <TransitionGroup>{\r\n      trackings.map(tracking => {\r\n        let { itinerary, itinerary: { flight1, flight2 }, id, cabin } = tracking;\r\n        let isAvailable = !isNaN(flight1[`status${cabin}`]) && (!flight2 || !isNaN(flight2[`status${cabin}`]));\r\n        function removeFromTracking() {\r\n          return (async () => {\r\n            try {\r\n              let response = await fetch(`${environment.baseUrl}/tracking/${id}`, {\r\n                method: 'DELETE',\r\n                headers: {\r\n                  'Authorization': `Bearer ${token}`\r\n                }\r\n              })\r\n              if (!response.ok) {\r\n                throw new Error((await response.json()).message)\r\n              }\r\n              setTrackings(trackings.filter(e => e.id !== id));\r\n              pushNotification({\r\n                header: 'Track',\r\n                body: 'Remove from tracking list successfully.'\r\n              })\r\n            }\r\n            catch (e) {\r\n              pushNotification({\r\n                header: 'Track',\r\n                body: `Fail to remove from tracking list. ${e.message}`\r\n              })\r\n            }\r\n          })();\r\n        }\r\n        const options = { year: 'numeric', month: 'long', day: 'numeric' };\r\n        let date = new Date(flight1.departureTime);\r\n        return (\r\n          <CSSTransition key={id} timeout={500} classNames=\"route-transition\">\r\n            <WithHeightValueDiv containerClass=\"tracking-item\">\r\n              <div className=\"my-flight-info\">\r\n                <div className=\"date\">{date.toLocaleDateString('en-US', options)}</div>\r\n                <div className=\"cabin\">{getCabinNameFromCode(cabin)}</div>\r\n              </div>\r\n              <SearchResultItem itinerary={itinerary} cabin={cabin} isAvailable={isAvailable}\r\n                button={<AsyncButton onClick={removeFromTracking}>Remove</AsyncButton>}\r\n                delay={500} />\r\n            </WithHeightValueDiv>\r\n          </CSSTransition>\r\n        )\r\n      })}\r\n    </TransitionGroup> :\r\n    <div className=\"loading\"><Spinner animation=\"border\" variant=\"primary\" /></div>\r\n\r\n  return (\r\n    <div className=\"row\">\r\n      <div className=\"col-md-12 align-items-center\">\r\n        <div className=\"about_content \">\r\n          <h2 className=\"title\">My Flights</h2>\r\n          <div className=\"route-container\">\r\n            {content}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\nconst mapStateToProps = ({ userId, token }) => ({ userId, token });\r\nexport default connect(mapStateToProps, { setToken, setUserInfo, pushNotification })(MyFlight);","import React from 'react';\r\nimport { useRouteMatch, Route, Switch } from \"react-router-dom\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport './About.scss';\r\nimport PersonalInfo from '../components/account/PersonalInfo.js';\r\nimport MyFlight from '../components/account/MyFlight.js';\r\n\r\nexport default function Account() {\r\n  let { path } = useRouteMatch();\r\n  return (\r\n    <>\r\n      <section className=\"breadcrumb_area\">\r\n        <div className=\"overlay bg-parallax\" data-stellar-ratio=\"0.8\" data-stellar-vertical-offset=\"0\" data-background=\"\"></div>\r\n        <div className=\"container\">\r\n          <div className=\"page-cover text-center\">\r\n            <h2 className=\"page-cover-tittle f_48\">Account</h2>\r\n          </div>\r\n        </div>\r\n      </section>\r\n      <section className=\"about_history_area section_gap\">\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n            <div className=\"d-none d-md-block col-md-3 col-xl-2 align-items-center\">\r\n              <ul className=\"list-unstyled components\">\r\n                <li>\r\n                  <NavLink to=\"/account/personal-info\" activeClassName=\"active\" className=\"nav-link sub-item\">Personal info</NavLink>\r\n                </li>\r\n                <li>\r\n                  <NavLink to=\"/account/my-flights\" activeClassName=\"active\" className=\"nav-link sub-item\">My flighs</NavLink>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n            <div className=\"container align-items-center\" style={{flex: 1}}>\r\n              <Switch>\r\n                <Route path={`${path}/personal-info`}>\r\n                  <PersonalInfo />\r\n                </Route>\r\n                <Route path={`${path}/my-flights`}>\r\n                  <MyFlight />\r\n                </Route>\r\n              </Switch>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    </>\r\n  )\r\n}","import React from 'react';\r\nimport './ToastContainer.scss';\r\nimport { Toast } from 'react-bootstrap';\r\nimport { connect } from 'react-redux'\r\nimport { clearNotification } from '../redux/actions'\r\nimport { CSSTransition, TransitionGroup } from 'react-transition-group';\r\nimport WithHeightValueDiv from './common/WithHeightValueDiv.js'\r\n\r\nfunction ToastContainer({ toasts, clearNotification }) {\r\n  return (\r\n    <div className=\"toast-container\">\r\n      <TransitionGroup>\r\n        {toasts.map(toast => (\r\n          <CSSTransition key={toast.id} timeout={1000} classNames=\"toast-transition\">\r\n            <WithHeightValueDiv>\r\n              <Toast show={true} onClose={() => { clearNotification(toast.id) }} delay={10000} autohide>\r\n                <Toast.Header>\r\n                  <strong className=\"mr-auto\">{toast.header}</strong>\r\n                </Toast.Header>\r\n                <Toast.Body>{toast.body}</Toast.Body>\r\n              </Toast>\r\n            </WithHeightValueDiv>\r\n          </CSSTransition>\r\n        ))}\r\n      </TransitionGroup>\r\n    </div>\r\n  );\r\n}\r\nconst mapStateToProps = ({ toasts }) => ({ toasts });\r\nexport default connect(mapStateToProps, { clearNotification })(ToastContainer);","import React, { useEffect, useState } from 'react';\r\nimport { BrowserRouter, Route, Switch, Redirect } from \"react-router-dom\";\r\nimport { RouteContext } from '../context/Contexts.js';\r\nimport About from '../pages/About.js';\r\nimport Footer from './common/Footer.js';\r\nimport Header from './common/Header.js';\r\nimport Home from '../pages/Home.js';\r\nimport Search from '../pages/Search.js';\r\nimport Account from '../pages/Account.js';\r\nimport { environment } from '../environment.js'\r\nimport { connect } from 'react-redux'\r\nimport { setToken, setUserInfo, pushNotification } from '../redux/actions'\r\nimport { getJwtPayload } from \"../utils/utils.js\";\r\nimport ToastContainer from './ToastContainer';\r\n\r\nfunction App({ userId, setToken, setUserInfo, pushNotification }) {\r\n  const [routes, setRoutes] = useState();\r\n  useEffect(() => {\r\n    fetch(`${environment.baseUrl}/routes`, { method: 'get' })\r\n      .then(function (response) {\r\n        if (!response.ok) throw new Error(response.statusText)\r\n        return response.json();\r\n      })\r\n      .then(function (responseJson) {\r\n        setRoutes(responseJson);\r\n      })\r\n      .catch(function (err) {\r\n        console.error(err);\r\n      });\r\n  }, []);\r\n  \r\n  useEffect(() => {\r\n    if(window.localStorage.token) setToken(window.localStorage.token);\r\n    if(window.localStorage.userInfo) setUserInfo(JSON.parse(window.localStorage.userInfo));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    window.addEventListener(\"message\", async event => {\r\n      if (event.origin !== window.location.origin) return;\r\n      const token = event.data.token;\r\n      if (!token) return;\r\n      setToken(token);\r\n      const payload = getJwtPayload(token);\r\n      const getUserResponse = await fetch(`${environment.authBaseUrl}/users/${payload.userId}`, {\r\n        method: 'GET',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      if (!getUserResponse.ok) throw new Error(getUserResponse.statusText)\r\n      const getUserContent = await getUserResponse.json();\r\n      setUserInfo(getUserContent)\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    window.addEventListener('scroll', function () {\r\n      let headerArea = document.querySelector('.header_area');\r\n      if (window.scrollY >= headerArea.scrollHeight / 2) {\r\n        headerArea.classList.add(\"navbar_fixed\");\r\n      }\r\n      else {\r\n        headerArea.classList.remove(\"navbar_fixed\");\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  \r\n  useEffect(() => {\r\n  }, []);\r\n\r\n  return (\r\n    <BrowserRouter basename=\"/\">\r\n      <RouteContext.Provider value={{ routes }}>\r\n        <div>\r\n          <Header />\r\n          <Switch>\r\n            <Route path={[\"/search/:departure/:arrival/:cabin/:date\", \"/search/:departure/:arrival/:cabin\", \"/search\"]}>\r\n              <Search />\r\n            </Route>\r\n            <Route path=\"/about\">\r\n              <About />\r\n            </Route>\r\n            <Route path=\"/account\">\r\n              {userId ? <Account /> : <Redirect to=\"/\" />}\r\n            </Route>\r\n            <Route path=\"/\">\r\n              <Home />\r\n            </Route>\r\n          </Switch>\r\n          <Footer />\r\n          <ToastContainer />\r\n        </div>\r\n      </RouteContext.Provider>\r\n    </BrowserRouter>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = ({ userId }) => ({ userId });\r\nexport default connect(mapStateToProps, { setToken, setUserInfo, pushNotification })(App);","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import { AVAILABLE_ONLY, NONSTOP_ONLY, SET_TOKEN, SET_USER_INFO, PUSH_NOTIFICATION, CLEAR_NOTIFICATION } from \"./actionTypes\";\r\nimport { getJwtPayload } from \"../utils/utils.js\";\r\n\r\nconst initialState = {\r\n  availableOnly: true,\r\n  nonstopOnly: false,\r\n  token: null,\r\n  userId: null,\r\n  userInfo: null,\r\n  toasts: []\r\n}\r\n\r\nexport default (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case AVAILABLE_ONLY:\r\n      return { ...state, availableOnly: action.value };\r\n    case NONSTOP_ONLY:\r\n      return { ...state, nonstopOnly: action.value };\r\n    case SET_TOKEN:\r\n      const token = action.value;\r\n      if (token) {\r\n        window.localStorage.token = token;\r\n      }\r\n      else {\r\n        delete window.localStorage.token;\r\n      }\r\n      const userId = token && getJwtPayload(token)?.userId;\r\n      if (token) {\r\n        window.localStorage.userId = userId;\r\n      }\r\n      else {\r\n        delete window.localStorage.userId;\r\n      }\r\n      return { ...state, token, userId };\r\n    case SET_USER_INFO:\r\n      const userInfo = action.value;\r\n      if (userInfo) {\r\n        window.localStorage.userInfo = JSON.stringify(userInfo);;\r\n      }\r\n      else {\r\n        delete window.localStorage.userInfo;\r\n      }\r\n      return { ...state, userInfo };\r\n    case PUSH_NOTIFICATION: {\r\n      let newToastId = (state.toasts.length === 0) ? 0 : state.toasts[state.toasts.length - 1].id + 1;\r\n      let newToasts = [...state.toasts, {\r\n        id: newToastId,\r\n        header: action.value.header,\r\n        body: action.value.body\r\n      }]\r\n      return { ...state, toasts: newToasts };\r\n    }\r\n    case CLEAR_NOTIFICATION: {\r\n      let newToasts = state.toasts.flatMap(toast => (toast.id === action.value) ? [] : [toast]);\r\n      return { ...state, toasts: newToasts };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\nimport App from './components/App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport { Provider } from 'react-redux'\r\nimport { createStore } from 'redux'\r\nimport reducer from './redux/reducer.js'\r\nimport './index.scss';\r\n\r\nlet store = createStore(reducer)\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","module.exports = __webpack_public_path__ + \"static/media/about_bg.e82a4b8a.jpg\";","module.exports = __webpack_public_path__ + \"static/media/logo.822c5a26.png\";"],"sourceRoot":""}